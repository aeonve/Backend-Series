# SOA 与服务化架构

由于互联网应用规模迅速增长，集中式架构已无法做到无限制地提升系统的吞吐量，它只能通过增加服务器的配置有限度地提升系统的处理能力，这种伸缩方式被称为垂直伸缩。与之相对的伸缩方式被称为水平伸缩，水平伸缩能够仅通过增减服务器数量相应地提升和降低系统的吞吐量。这种分布式系统架构，在理论上为吞吐量的提升提供了无限的可能。因此，用于搭建互联网应用的服务器也渐渐放弃了昂贵的小型机，转而采用大量的廉价PC服务器。

分布式场景下比较著名的难题就是CAP定理。CAP定理认为，在分布式系统中，系统的一致性（Consistency）、可用性（Availability）、分区容忍性（Partition tolerance），三者不可能同时兼顾。在分布式系统中，由于网络通信的不稳定性，分区容忍性是必须要保证的，因此在设计应用的时候就需要在一致性和可用性之间权衡选择。互联网应用比企业级应用更加偏向保持可用性，因此通常用最终一致性代替传统事务的ACID强一致性。

SOA即面向服务架构，这是一个特别宽泛的概念，可以简单地认为SOA约等于“模块化开发 + 分布式计算”。SOA需要从宏观和微观两个不同的角度讨论。宏观SOA面向高层次的部门级别、公司级别甚至行业级别，涉及商业、管理、技术等方面，设计时要全局考虑。SOA是面向宏观层面的架构，其带来的收益也最能在宏观层面体现出来，因此很多业界专家都认为SOA的概念过于抽象、不接地气。微观SOA则面向团队和个人，涉及具体服务在业务、架构和开发方面的实施，在架构体系上包括服务治理、服务编排等内容。微观层面的SOA更容易实施。

